webpackJsonp([20],{"+skl":function(n,e){},0:function(n,e){},AXMS:function(n,e){},IQhH:function(n,e){},NHnr:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("7+uW"),a=t("Xxa5"),o=t.n(a),u=t("exGp"),i=t.n(u),s=t("gyMJ"),c={name:"Tab",created:function(){this.checkLogin()},mounted:function(){},data:function(){return{active:"chat",user:{},user_info:!1,change_nickname_modal:!1,change_password_modal:!1,new_nickname:"",new_password:"",new_password_re:"",send_image:null,setting_active:!1,chat_setting_show:null,del_friend_modal:!1,edit_remark_modal:!1,new_remark_name:""}},methods:{toMenu:function(n){this.active=n,this.$router.push("/pc/"+n)},checkLogin:function(){var n=this;return i()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.f)();case 2:t=e.sent,console.log(t),200===t.code?(n.$User.setUser(t.data),n.user=t.data,n.$socket.emit("in_chat")):n.$Message.warning(t.message);case 5:case"end":return e.stop()}},e,n)}))()},clickImage:function(){document.getElementById("send-image").click()},uploadImage:function(){var n=this;return i()(o.a.mark(function e(){var t,r,a,u;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("send-image"),r=t.files[0],(a=new FormData).append("file",r),e.next=6,Object(s.z)(a);case 6:u=e.sent,console.log(u),200===u.code?(n.user.logo=n.$Server+u.data.url,console.log("上传头像成功",n.user.logo),n.updateUserLogo()):n.$Message.error(u.message);case 9:case"end":return e.stop()}},e,n)}))()},updateUserLogo:function(){var n=this;return i()(o.a.mark(function e(){var t,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={logo:n.user.logo},e.next=3,Object(s.x)(t);case 3:200===(r=e.sent).code?console.log("更换头像成功",n.user):n.$Message.error(r.message);case 5:case"end":return e.stop()}},e,n)}))()},updateUserNickname:function(){var n=this;return i()(o.a.mark(function e(){var t,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.new_nickname.trim()){e.next=3;break}return n.$Message.warning("用户昵称不能为空"),e.abrupt("return");case 3:return t={nickname:n.new_nickname},e.next=6,Object(s.x)(t);case 6:200===(r=e.sent).code?(n.user.nickname=n.new_nickname,n.$User.setUser(n.user),n.update_nickname_modal=!1):n.$Message.error(r.message);case 8:case"end":return e.stop()}},e,n)}))()},updateUserPassword:function(){var n=this;return i()(o.a.mark(function e(){var t,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.new_password.trim()){e.next=3;break}return n.$Message.warning("密码不能为空"),e.abrupt("return");case 3:if(n.new_password.trim()===n.re_new_password.trim()){e.next=6;break}return n.$Message.warning("两次密码不一致"),e.abrupt("return");case 6:return t={password:n.new_password},e.next=9,Object(s.x)(t);case 9:200===(r=e.sent).code?(n.$Message.success("密码修改成功"),n.$router.go(-1)):n.$Message.error(r.message);case 11:case"end":return e.stop()}},e,n)}))()},Logout:function(){var n=this;return i()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.a)();case 2:t=e.sent,console.log(t),200===t.code?(n.$Message.success("用户退出登录成功"),n.$router.go(0)):n.$Message.warning("用户退出登录异常");case 5:case"end":return e.stop()}},e,n)}))()}},watch:{$route:function(){var n=this.$route.path;console.log("path:",n),this.active=n.split("/")[n.split("/").length-1]}}},d={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{attrs:{id:"left"}},[t("div",{staticClass:"user",on:{mouseleave:function(e){n.user_info=!1}}},[t("img",{attrs:{src:n.user.logo,alt:""},on:{click:n.clickImage,mouseover:function(e){n.user_info=!0}}}),n._v(" "),t("div",{staticClass:"user-text"},[n._v("\n      "+n._s(n.user.nickname)+"\n    ")]),n._v(" "),n.user_info?t("div",{staticClass:"user-info",on:{mouseleave:function(e){n.user_info=!1}}},[t("ul",[t("li",{on:{click:function(e){n.change_nickname_modal=!0}}},[n._v("更改昵称")]),n._v(" "),t("li",{on:{click:function(e){n.change_password_modal=!0}}},[n._v("更改密码")]),n._v(" "),t("li",{on:{click:n.Logout}},[n._v("退出登录")])])]):n._e()]),n._v(" "),t("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"send-image"},on:{change:n.uploadImage}}),n._v(" "),t("ul",[t("li",{class:"menu-item "+("chat"===n.active?"active":""),on:{click:function(e){n.toMenu("chat")}}},[t("Tooltip",{attrs:{content:"消息",placement:"right-start"}},[t("div",{style:"width: "+("message"===n.active?"76px":"80px")},[t("Icon",{attrs:{type:"ios-chatbubbles",size:"30"}})],1)])],1),n._v(" "),t("li",{class:"menu-item "+("group"===n.active?"active":""),on:{click:function(e){n.toMenu("group")}}},[t("Tooltip",{attrs:{content:"群聊",placement:"right-start"}},[t("div",{style:"width: "+("chat"===n.active?"76px":"80px")},[t("Icon",{attrs:{type:"md-contacts",size:"30"}})],1)])],1),n._v(" "),t("li",{class:"menu-item "+("friend"===n.active?"active":""),on:{click:function(e){n.toMenu("friend")}}},[t("Tooltip",{attrs:{content:"好友",placement:"right-start"}},[t("div",{style:"width: "+("friend"===n.active?"76px":"80px")},[t("Icon",{attrs:{type:"md-person",size:"30"}})],1)])],1)]),n._v(" "),t("Modal",{attrs:{title:"修改昵称","class-name":"my-modal",width:"400px"},on:{"on-cancel":function(e){n.change_nickname_modal=!1}},model:{value:n.change_nickname_modal,callback:function(e){n.change_nickname_modal=e},expression:"change_nickname_modal"}},[t("div",{staticClass:"my-modal-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.new_nickname,expression:"new_nickname"}],attrs:{type:"text",placeholder:"请输入新昵称"},domProps:{value:n.new_nickname},on:{input:function(e){e.target.composing||(n.new_nickname=e.target.value)}}})]),n._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){n.change_nickname_modal=!1}}},[n._v("取消")]),n._v(" "),t("Button",{attrs:{type:"primary",size:"large"},on:{click:n.updateUserNickname}},[n._v("确定")])],1)]),n._v(" "),t("Modal",{attrs:{title:"修改密码","class-name":"my-modal",width:"400px"},on:{"on-cancel":function(e){n.change_password_modal=!1}},model:{value:n.change_password_modal,callback:function(e){n.change_password_modal=e},expression:"change_password_modal"}},[t("div",{staticClass:"my-modal-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.new_password,expression:"new_password"}],attrs:{type:"text",placeholder:"请输入新密码"},domProps:{value:n.new_password},on:{input:function(e){e.target.composing||(n.new_password=e.target.value)}}})]),n._v(" "),t("div",{staticClass:"my-modal-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.new_password_re,expression:"new_password_re"}],attrs:{type:"text",placeholder:"重复输入新密码"},domProps:{value:n.new_password_re},on:{input:function(e){e.target.composing||(n.new_password_re=e.target.value)}}})]),n._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){n.change_password_modal=!1}}},[n._v("取消")]),n._v(" "),t("Button",{attrs:{type:"primary",size:"large"},on:{click:n.updateUserPassword}},[n._v("确定")])],1)])],1)},staticRenderFns:[]};var p={props:{url:{required:!0}},data:function(){return{loading:!1,html:""}},watch:{url:function(n){this.load(n)}},mounted:function(){this.load()},methods:{load:function(){var n=this;return i()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.q)();case 2:t=e.sent,n.html=t.data;case 4:case"end":return e.stop()}},e,n)}))()}}},l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var n=this.$createElement,e=this._self._c||n;return e("div",{staticClass:"my-frame"},[e("iframe",{attrs:{src:"https://hello.yy.com/",width:"100%",height:"100%",frameborder:"0"}})])}]};var m={name:"App",data:function(){return{show:"pc",frame_show:!1}},created:function(){this.in_chat(),document.body.clientWidth>500?this.show="pc":this.show="wap"},methods:{in_chat:function(){this.$socket.emit("in_chat")},out_chat:function(){this.$socket.emit("out_chat")}},mounted:function(){},destroyed:function(){console.log("exit........."),this.out_chat()},components:{Tab:t("VU/8")(c,d,!1,function(n){t("AXMS")},"data-v-04d7ef9c",null).exports,MyFrame:t("VU/8")(p,l,!1,function(n){t("Z49H")},null,null).exports}},f={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view"),n._v(" "),"pc"===n.show?t("div",[t("Tab")],1):n._e(),n._v(" "),t("MyFrame",{directives:[{name:"show",rawName:"v-show",value:n.frame_show,expression:"frame_show"}],attrs:{url:"http://www.baidu.com"}}),n._v(" "),t("div",{staticClass:"my-frame-btn",on:{click:function(e){n.frame_show=!n.frame_show}}},[t("Icon",{attrs:{type:"md-bonfire",size:"30"}})],1)],1)},staticRenderFns:[]};var h=t("VU/8")(m,f,!1,function(n){t("IQhH")},null,null).exports,_=t("/ocq");r.default.use(_.a);var g=new _.a({routes:[{path:"/",redirect:document.body.clientWidth>500?"/pc/chat":"/wap"},{path:"/pc/chat",component:function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,"Tgbz"))},name:"pcChat"},{path:"/pc/group",component:function(){return t.e(5).then(t.bind(null,"5D29"))},name:"pcGroup"},{path:"/pc/friend",component:function(){return t.e(3).then(t.bind(null,"e58N"))},name:"pcFriend"},{path:"/home",component:function(){return Promise.all([t.e(0),t.e(1)]).then(t.bind(null,"Uerx"))},name:"Home"},{path:"/wap",component:function(){return t.e(15).then(t.bind(null,"/Pig"))},name:"Wap"},{path:"/user",component:function(){return t.e(16).then(t.bind(null,"PiJF"))},name:"User"},{path:"/user_password",component:function(){return t.e(18).then(t.bind(null,"t3T6"))},name:"UserPassword"},{path:"/chat/:id",component:function(){return Promise.all([t.e(0),t.e(8)]).then(t.bind(null,"L6FC"))},name:"Chat"},{path:"/friend",component:function(){return t.e(13).then(t.bind(null,"dhX8"))},name:"Friend"},{path:"/friend_info/:id",component:function(){return t.e(9).then(t.bind(null,"lncJ"))},name:"FriendInfo"},{path:"/friend_add",component:function(){return t.e(14).then(t.bind(null,"Tmzu"))},name:"FriendAdd"},{path:"/group",component:function(){return t.e(10).then(t.bind(null,"x6Z6"))},name:"Group"},{path:"/group_info/:id",component:function(){return t.e(4).then(t.bind(null,"bXtg"))},name:"GroupInfo"},{path:"/group_add",component:function(){return t.e(6).then(t.bind(null,"AXd7"))},name:"GroupAdd"},{path:"/group_user_add/:id",component:function(){return t.e(7).then(t.bind(null,"zrbn"))},name:"GroupUserAdd"},{path:"/group_user_del/:id",component:function(){return t.e(17).then(t.bind(null,"tVJf"))},name:"GroupUserDel"},{path:"/group_admin/:id",component:function(){return t.e(11).then(t.bind(null,"6hZk"))},name:"GroupAdmin"},{path:"/group_admin_add/:id",component:function(){return t.e(12).then(t.bind(null,"O0Cf"))},name:"GroupAdminAdd"}]}),v=t("BTaQ"),w=t.n(v),k=(t("+skl"),t("Vpw6"),t("hMcO")),b=t.n(k),x=t("DmT9"),y=t.n(x);r.default.use(w.a),r.default.use(b.a,y()("http://127.0.0.1:5000")),r.default.config.productionTip=!1,r.default.prototype.$Server="http://127.0.0.1:5000",r.default.prototype.$User={user:null,setUser:function(n){this.user=n}},new r.default({el:"#app",router:g,components:{App:h},template:"<App/>"})},Vpw6:function(n,e){},Z49H:function(n,e){},gyMJ:function(n,e,t){"use strict";t.d(e,"f",function(){return o}),t.d(e,"a",function(){return u}),t.d(e,"z",function(){return i}),t.d(e,"y",function(){return s}),t.d(e,"s",function(){return c}),t.d(e,"r",function(){return d}),t.d(e,"x",function(){return p}),t.d(e,"n",function(){return l}),t.d(e,"m",function(){return m}),t.d(e,"c",function(){return f}),t.d(e,"u",function(){return h}),t.d(e,"h",function(){return _}),t.d(e,"o",function(){return g}),t.d(e,"d",function(){return v}),t.d(e,"v",function(){return w}),t.d(e,"i",function(){return k}),t.d(e,"t",function(){return b}),t.d(e,"p",function(){return x}),t.d(e,"e",function(){return y}),t.d(e,"w",function(){return $}),t.d(e,"j",function(){return M}),t.d(e,"b",function(){return U}),t.d(e,"k",function(){return I}),t.d(e,"g",function(){return z}),t.d(e,"l",function(){return A}),t.d(e,"q",function(){return C});var r=t("mtWM"),a=t.n(r);a.a.interceptors.response.use(function(n){return n.data});var o=function(){return a.a.get("/check_login")},u=function(n){return a.a.post("/logout",n)},i=function(n){return a.a.post("/upload_logo",n)},s=function(n){return a.a.post("/upload_image",n)},c=function(n){return a.a.get("/user_info",{params:n})},d=function(n){return a.a.get("/user",{params:n})},p=function(n){return a.a.put("/user",n)},l=function(n){return a.a.get("/friend_info",{params:n})},m=function(){return a.a.get("/friend")},f=function(n){return a.a.post("/friend",n)},h=function(n){return a.a.put("/friend",n)},_=function(n){return a.a.delete("/friend",{params:n})},g=function(n){return a.a.get("/group",{params:n})},v=function(n){return a.a.post("/group",n)},w=function(n){return a.a.put("/group",n)},k=function(n){return a.a.delete("/group",{params:n})},b=function(n){return a.a.delete("/quit_group",{params:n})},x=function(n){return a.a.get("/group_user",{params:n})},y=function(n){return a.a.post("/group_user",n)},$=function(n){return a.a.put("/group_user",n)},M=function(n){return a.a.delete("/group_user",{params:n})},U=function(n){return a.a.post("/chat",n)},I=function(n){return a.a.get("/chat",{params:n})},z=function(n){return a.a.delete("/chat",{params:n})},A=function(n){return a.a.get("/chat_message",{params:n})},C=function(){return a.a.get("/get_html")}}},["NHnr"]);
//# sourceMappingURL=app.20e374ad733d452caa1b.js.map