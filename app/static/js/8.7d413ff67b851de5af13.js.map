{"version":3,"sources":["webpack:///src/components/wap/Chat.vue","webpack:///./src/components/wap/Chat.vue?13a5","webpack:///./src/components/wap/Chat.vue"],"names":["Chat","name","mounted","this","chat_id","$route","params","id","checkLogin","getChat","getChatMessage","data","user","chat","send_message","send_image","emoji_active","active_frame","message_data","emoji_list","url","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","resp","wrap","_context","prev","next","Object","api","sent","code","stop","_this2","_callee2","json_data","_context2","console","log","$Message","error","message","_this3","_callee3","_context3","scrollAuto","chatMore","type","$router","push","chat_obj_id","clickEmoji","emoji","_this4","setTimeout","keepLastIndex","document","getElementById","changeMessage","e","_this5","obj","target","innerHTML","trim","$nextTick","div","scrollTop","scrollHeight","range","window","getSelection","focus","selectAllChildren","collapseToEnd","selection","body","createTextRange","moveToElementText","collapse","select","clickImage","click","uploadImage","_this6","_callee4","input","file","formData","_context4","files","FormData","append","send","user_data","$socket","emit","extends_default","sockets","connect","response","val","wap_Chat","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","display","attrs","on","change","_v","$event","size","_s","nickname","_l","text-align","domProps","src","logo","height","line-height","padding-left","float","directives","rawName","value","expression","alt","width","left","contentEditable","position","color","top","background","frameborder","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"oLAmFAA,GACAC,KAAA,OACAC,QAFA,WAGAC,KAAAC,QAAAD,KAAAE,OAAAC,OAAAC,GACAJ,KAAAK,aACAL,KAAAM,UACAN,KAAAO,kBAEAC,KARA,WASA,OACAC,QACAR,QAAA,KACAS,QACAC,aAAA,GACAC,WAAA,KACAC,cAAA,EAGAC,aAAA,KAGAC,gBAGAC,aACAC,IAAA,QAAAnB,KAAA,OAAAmB,IAAA,QAAAnB,KAAA,OACAmB,IAAA,QAAAnB,KAAA,OAAAmB,IAAA,QAAAnB,KAAA,OACAmB,IAAA,QAAAnB,KAAA,OAAAmB,IAAA,QAAAnB,KAAA,OACAmB,IAAA,QAAAnB,KAAA,OAAAmB,IAAA,QAAAnB,KAAA,OACAmB,IAAA,QAAAnB,KAAA,OAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB,KAAA,QACAmB,IAAA,SAAAnB,KAAA,QAAAmB,IAAA,SAAAnB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","file":"static/js/8.7d413ff67b851de5af13.js","sourcesContent":["<template>\n  <div class=\"wap-main\">\n    <input type=\"file\" id=\"send-image\" style=\"display: none;\" @change=\"uploadImage\">\n    <!---------------------  聊天窗口  ------------------->\n    <div class=\"wap-main-chat\">\n      <div class=\"wap-main-chat-title\">\n        <span class=\"wap-main-chat-title-back\" @click=\"$router.push('/wap')\">\n          <Icon type=\"ios-arrow-back\" size=\"18\"/>\n        </span>\n        <span class=\"wap-main-chat-title-name\">\n          {{ chat.nickname || chat.name }}\n        </span>\n        <span class=\"wap-main-chat-title-more\">\n          <Icon type=\"ios-more\" size=\"20\" @click=\"chatMore\"/>\n        </span>\n      </div>\n      <!--  聊天body  -->\n      <div class=\"wap-main-chat-body\" id=\"chat-body\">\n        <template v-for=\"message in message_data\">\n          <template v-if=\"message.id === user.id\">\n            <div class=\"message-item-self\">\n              <div class=\"wap-chat-text\">\n                <span v-html=\"message.message\" style=\"text-align: left;display: inline-block;\"></span>\n              </div>\n              <div class=\"wap-chat-img\">\n                <img :src=\"message.logo\">\n              </div>\n            </div>\n\n          </template>\n          <template v-else>\n            <div class=\"message-item\">\n              <div class=\"wap-chat-img\">\n                <img :src=\"message.logo\">\n              </div>\n              <div class=\"wap-chat-text\">\n                <span v-html=\"message.message\"></span>\n              </div>\n            </div>\n          </template>\n\n        </template>\n      </div>\n      <!--输入框-->\n      <div class=\"wap-main-chat-bottom\">\n        <div style=\"text-align: left;height: 30px;line-height: 30px;padding-left: 5px; float: left;\">\n          <Icon class=\"message-file\" type=\"ios-happy-outline\" size=\"22\" @click=\"emoji_active=!emoji_active\"/>\n          <div class=\"emoji\" v-show=\"emoji_active\">\n            <template v-for=\"emoji in emoji_list\">\n              <img :src=\"'/static/images/emoji/' + emoji.url\" :alt=\"emoji.name\" @click=\"clickEmoji(emoji)\">\n            </template>\n          </div>\n          <Icon class=\"message-file\" type=\"md-images\" size=\"22\" @click=\"clickImage\"/>\n        </div>\n        <div style=\"float: left;width: 68%; left: 3px;\">\n          <div contentEditable=\"true\" id=\"send-message\" class=\"send-message\" @input=\"changeMessage\"\n               v-html=\"send_message\"></div>\n        </div>\n\n        <Button @click=\"send\" size=\"small\" type=\"primary\" style=\"float: left; left: 3px;\">发送</Button>\n\n      </div>\n      <div class=\"frame-btn\" @click=\"active_frame=true\">\n        <Icon type=\"logo-vimeo\" size=\"28\"/>\n      </div>\n    </div>\n\n    <!--  第三方广告页面  -->\n    <div v-if=\"active_frame\" class=\"frame-div\">\n      <div @click=\"active_frame=false\" style=\"position: absolute; color: #57a3f3;top: 34px; left: 5px;\">\n        <Icon type=\"ios-undo\" size=\"28\"/>\n      </div>\n      <!--<a href=\"http://www.51job.com\"></a>-->\n      <iframe src=\"http://www.baidu.com\" frameborder=\"0\"\n              style=\"width: 100%; height: 100%;background: #fafafa;\"></iframe>\n    </div>\n  </div>\n\n</template>\n\n<script>\n  import {checkLogin, uploadLogo, getChat, getChatMessage, uploadImage} from \"../../api/index\";\n\n  export default {\n    name: \"Chat\",\n    mounted() {\n      this.chat_id = this.$route.params.id;\n      this.checkLogin();\n      this.getChat();\n      this.getChatMessage();\n    },\n    data() {\n      return {\n        user: {},\n        chat_id: null,\n        chat: {},\n        send_message: '',               // 发送消息内容\n        send_image: null,               // 选择发送图片\n        emoji_active: false,            // 表情包\n\n        // 第三方网站\n        active_frame: null,\n\n        // 用户消息列表\n        message_data: [],\n\n        // 表情包\n        emoji_list: [\n          {'url': '1.gif', 'name': '#1'}, {'url': '2.gif', 'name': '#2'},\n          {'url': '3.gif', 'name': '#3'}, {'url': '4.gif', 'name': '#4'},\n          {'url': '5.gif', 'name': '#5'}, {'url': '6.gif', 'name': '#6'},\n          {'url': '7.gif', 'name': '#7'}, {'url': '8.gif', 'name': '#8'},\n          {'url': '9.gif', 'name': '#9'}, {'url': '10.gif', 'name': '#10'},\n          {'url': '11.gif', 'name': '#11'}, {'url': '12.gif', 'name': '#12'},\n          {'url': '13.gif', 'name': '#13'}, {'url': '14.gif', 'name': '#14'},\n          {'url': '15.gif', 'name': '#15'}, {'url': '16.gif', 'name': '#16'},\n          {'url': '17.gif', 'name': '#17'}, {'url': '18.gif', 'name': '#18'},\n          {'url': '19.gif', 'name': '#19'}, {'url': '20.gif', 'name': '#20'},\n          {'url': '21.gif', 'name': '#21'}, {'url': '22.gif', 'name': '#22'},\n          {'url': '23.gif', 'name': '#23'}, {'url': '24.gif', 'name': '#24'},\n          {'url': '25.gif', 'name': '#25'}, {'url': '26.gif', 'name': '#26'},\n          {'url': '27.gif', 'name': '#27'}, {'url': '28.gif', 'name': '#28'},\n          {'url': '29.gif', 'name': '#29'}, {'url': '30.gif', 'name': '#30'},\n          {'url': '31.gif', 'name': '#31'}, {'url': '32.gif', 'name': '#32'},\n          {'url': '33.gif', 'name': '#33'}, {'url': '34.gif', 'name': '#34'},\n          {'url': '35.gif', 'name': '#35'}, {'url': '36.gif', 'name': '#36'},\n          {'url': '37.gif', 'name': '#37'}, {'url': '38.gif', 'name': '#38'},\n          {'url': '39.gif', 'name': '#39'}, {'url': '40.gif', 'name': '#40'},\n          {'url': '41.gif', 'name': '#41'}, {'url': '42.gif', 'name': '#42'},\n          {'url': '43.gif', 'name': '#43'}, {'url': '44.gif', 'name': '#44'},\n          {'url': '45.gif', 'name': '#45'}, {'url': '46.gif', 'name': '#46'},\n          {'url': '47.gif', 'name': '#47'}, {'url': '48.gif', 'name': '#48'},\n          {'url': '49.gif', 'name': '#49'}, {'url': '50.gif', 'name': '#50'},\n          {'url': '51.gif', 'name': '#51'}, {'url': '52.gif', 'name': '#52'},\n          {'url': '53.gif', 'name': '#53'}, {'url': '54.gif', 'name': '#54'},\n          {'url': '55.gif', 'name': '#55'}, {'url': '56.gif', 'name': '#56'},\n          {'url': '57.gif', 'name': '#57'}, {'url': '58.gif', 'name': '#58'},\n          {'url': '59.gif', 'name': '#59'}, {'url': '60.gif', 'name': '#60'},\n          {'url': '61.gif', 'name': '#61'}, {'url': '62.gif', 'name': '#62'},\n          {'url': '63.gif', 'name': '#63'}, {'url': '64.gif', 'name': '#64'},\n          {'url': '65.gif', 'name': '#65'}, {'url': '66.gif', 'name': '#66'},\n          {'url': '67.gif', 'name': '#67'}, {'url': '68.gif', 'name': '#68'},\n          {'url': '69.gif', 'name': '#69'}, {'url': '70.gif', 'name': '#70'},\n          {'url': '71.gif', 'name': '#71'}, {'url': '72.gif', 'name': '#72'},\n          {'url': '73.gif', 'name': '#73'}, {'url': '74.gif', 'name': '#74'},\n          {'url': '75.gif', 'name': '#75'}, {'url': '76.gif', 'name': '#76'},\n          {'url': '77.gif', 'name': '#77'}, {'url': '78.gif', 'name': '#78'},\n          {'url': '79.gif', 'name': '#79'}, {'url': '80.gif', 'name': '#80'},\n          {'url': '81.gif', 'name': '#81'}, {'url': '82.gif', 'name': '#82'},\n          {'url': '83.gif', 'name': '#83'}, {'url': '84.gif', 'name': '#84'},\n          {'url': '85.gif', 'name': '#85'}, {'url': '86.gif', 'name': '#86'},\n          {'url': '87.gif', 'name': '#87'}, {'url': '88.gif', 'name': '#88'},\n          {'url': '89.gif', 'name': '#89'}, {'url': '90.gif', 'name': '#90'},\n          {'url': '91.gif', 'name': '#91'}, {'url': '92.gif', 'name': '#92'},\n          {'url': '93.gif', 'name': '#93'}, {'url': '94.gif', 'name': '#94'},\n          {'url': '95.gif', 'name': '#95'}, {'url': '96.gif', 'name': '#96'},\n          {'url': '97.gif', 'name': '#97'}, {'url': '98.gif', 'name': '#98'},\n          {'url': '99.gif', 'name': '#99'}, {'url': '100.gif', 'name': '#100'},\n          {'url': '101.gif', 'name': '#101'}\n        ],\n      }\n    },\n    methods: {\n      async checkLogin(){\n        let resp = await checkLogin();\n        if(resp.code === 200){\n          this.user = resp.data;\n        }\n      },\n\n      // 获取聊天\n      async getChat(){\n        let json_data = {\n          chat_id: this.chat_id\n        };\n        let resp = await getChat(json_data);\n        console.log(resp);\n        if(resp.code === 200){\n          this.chat = resp.data;\n        }else{\n          this.$Message.error(resp.message);\n        }\n      },\n\n      // 获取聊天消息\n      async getChatMessage(){\n        let json_data = {\n          chat_id: this.chat_id\n        };\n        let resp = await getChatMessage(json_data);\n        console.log(resp);\n        if(resp.code === 200){\n          this.message_data = resp.data;\n        }else{\n          this.$Message.error(resp.message)\n        }\n        this.scrollAuto()\n      },\n\n      // 聊天更多信息\n      chatMore() {\n        console.log(this.chat);\n        if (this.chat.type === 2 || this.chat.type === '2'){\n          this.$router.push(`/group_info/${this.chat.chat_obj_id}`);\n        }else{\n          this.$router.push(`/friend_info/${this.chat.chat_obj_id}`)\n        }\n\n      },\n\n      // 点击表情\n      clickEmoji(emoji) {\n        this.send_message += '' + '<img src=\"/static/images/emoji\">' + emoji.url + '';\n        this.emoji_active = false;\n        setTimeout(() => {\n          this.keepLastIndex(document.getElementById('send-message'))\n        }, 5)\n      },\n\n      // 输入消息\n      changeMessage(e) {\n        let obj = e.target;\n        this.send_message = obj.innerHTML.trim();\n        setTimeout(() => {\n          this.keepLastIndex(obj)\n        }, 5)\n      },\n\n      // 聊天滚动条在最底部\n      scrollAuto() {\n        this.$nextTick(() => {\n          let div = document.getElementById('chat-body');\n          div.scrollTop = div.scrollHeight;\n        })\n      },\n\n      // 解决输入框焦点问题\n      keepLastIndex(obj) {\n        let range = null;\n        if (window.getSelection) { //ie11 10 9 ff safari\n          obj.focus(); //解决ff不获取焦点无法定位问题\n          range = window.getSelection(); //创建range\n          range.selectAllChildren(obj); //range 选择obj下所有子内容\n          range.collapseToEnd(); //光标移至最后\n        } else if (document.selection) { //ie10 9 8 7 6 5\n          //var range = document.selection.createRange(); //创建选择对象\n          range = document.body.createTextRange();\n          range.moveToElementText(obj); //range定位到obj\n          range.collapse(false); //光标移至最后\n          range.select();\n        }\n      },\n\n      // 选择图片\n      clickImage() {\n        document.getElementById('send-image').click();\n      },\n\n      // 发送图片\n      async uploadImage() {\n        let input = document.getElementById('send-image');\n        let file = input.files[0];\n        let formData = new FormData();\n        formData.append('file', file);\n        let resp = await uploadImage(formData);\n        console.log(resp);\n        if (resp.code === 200) {\n          this.send_message += '<img src=\"' + resp.data.url + '\">';\n          setTimeout(() => {\n            this.keepLastIndex(document.getElementById('send-message'))\n          }, 5)\n        }\n      },\n\n      /*------------------  socketio交互 -----------------*/\n      send(data) {\n        console.log(this.chat);\n        let message_data = {\n          chat: this.chat,\n          message: this.send_message,\n          user_data: this.user\n        };\n        this.$socket.emit('message', message_data);\n        this.message_data.push({\n          ...this.user, ...{message: this.send_message}\n        });\n        this.send_message = '';\n        this.scrollAuto();\n      },\n    },\n    sockets: {\n      connect: function () {\n        console.log('socket connected')\n      },\n      response: function (val) {\n        console.log(val);\n        console.log(val.user_data);\n        this.message_data.push(val.user_data);\n        this.scrollAuto();\n        console.log('返回' + val)\n      }\n    },\n  }\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/wap/Chat.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wap-main\"},[_c('input',{staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"send-image\"},on:{\"change\":_vm.uploadImage}}),_vm._v(\" \"),_c('div',{staticClass:\"wap-main-chat\"},[_c('div',{staticClass:\"wap-main-chat-title\"},[_c('span',{staticClass:\"wap-main-chat-title-back\",on:{\"click\":function($event){_vm.$router.push('/wap')}}},[_c('Icon',{attrs:{\"type\":\"ios-arrow-back\",\"size\":\"18\"}})],1),_vm._v(\" \"),_c('span',{staticClass:\"wap-main-chat-title-name\"},[_vm._v(\"\\n        \"+_vm._s(_vm.chat.nickname || _vm.chat.name)+\"\\n      \")]),_vm._v(\" \"),_c('span',{staticClass:\"wap-main-chat-title-more\"},[_c('Icon',{attrs:{\"type\":\"ios-more\",\"size\":\"20\"},on:{\"click\":_vm.chatMore}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"wap-main-chat-body\",attrs:{\"id\":\"chat-body\"}},[_vm._l((_vm.message_data),function(message){return [(message.id === _vm.user.id)?[_c('div',{staticClass:\"message-item-self\"},[_c('div',{staticClass:\"wap-chat-text\"},[_c('span',{staticStyle:{\"text-align\":\"left\",\"display\":\"inline-block\"},domProps:{\"innerHTML\":_vm._s(message.message)}})]),_vm._v(\" \"),_c('div',{staticClass:\"wap-chat-img\"},[_c('img',{attrs:{\"src\":message.logo}})])])]:[_c('div',{staticClass:\"message-item\"},[_c('div',{staticClass:\"wap-chat-img\"},[_c('img',{attrs:{\"src\":message.logo}})]),_vm._v(\" \"),_c('div',{staticClass:\"wap-chat-text\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(message.message)}})])])]]})],2),_vm._v(\" \"),_c('div',{staticClass:\"wap-main-chat-bottom\"},[_c('div',{staticStyle:{\"text-align\":\"left\",\"height\":\"30px\",\"line-height\":\"30px\",\"padding-left\":\"5px\",\"float\":\"left\"}},[_c('Icon',{staticClass:\"message-file\",attrs:{\"type\":\"ios-happy-outline\",\"size\":\"22\"},on:{\"click\":function($event){_vm.emoji_active=!_vm.emoji_active}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.emoji_active),expression:\"emoji_active\"}],staticClass:\"emoji\"},[_vm._l((_vm.emoji_list),function(emoji){return [_c('img',{attrs:{\"src\":'/static/images/emoji/' + emoji.url,\"alt\":emoji.name},on:{\"click\":function($event){_vm.clickEmoji(emoji)}}})]})],2),_vm._v(\" \"),_c('Icon',{staticClass:\"message-file\",attrs:{\"type\":\"md-images\",\"size\":\"22\"},on:{\"click\":_vm.clickImage}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"float\":\"left\",\"width\":\"68%\",\"left\":\"3px\"}},[_c('div',{staticClass:\"send-message\",attrs:{\"contentEditable\":\"true\",\"id\":\"send-message\"},domProps:{\"innerHTML\":_vm._s(_vm.send_message)},on:{\"input\":_vm.changeMessage}})]),_vm._v(\" \"),_c('Button',{staticStyle:{\"float\":\"left\",\"left\":\"3px\"},attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.send}},[_vm._v(\"发送\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"frame-btn\",on:{\"click\":function($event){_vm.active_frame=true}}},[_c('Icon',{attrs:{\"type\":\"logo-vimeo\",\"size\":\"28\"}})],1)]),_vm._v(\" \"),(_vm.active_frame)?_c('div',{staticClass:\"frame-div\"},[_c('div',{staticStyle:{\"position\":\"absolute\",\"color\":\"#57a3f3\",\"top\":\"34px\",\"left\":\"5px\"},on:{\"click\":function($event){_vm.active_frame=false}}},[_c('Icon',{attrs:{\"type\":\"ios-undo\",\"size\":\"28\"}})],1),_vm._v(\" \"),_c('iframe',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\",\"background\":\"#fafafa\"},attrs:{\"src\":\"http://www.baidu.com\",\"frameborder\":\"0\"}})]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-95064a5e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/wap/Chat.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-95064a5e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Chat.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chat.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chat.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-95064a5e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Chat.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-95064a5e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/wap/Chat.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}