webpackJsonp([17],{"/Pig":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=a("Xxa5"),n=a.n(c),s=a("exGp"),i=a.n(s),o=a("gyMJ"),r={name:"Wap",mounted:function(){this.getChat()},data:function(){return{user:{},chatroom_active:!1,chat_delete_modal:"",Loop:null,chat_list:[]}},methods:{getChat:function(){var t=this;return i()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.k)();case 2:a=e.sent,console.log(a),200===a.code?t.chat_list=a.data:t.$Message.error(a.message);case 5:case"end":return e.stop()}},e,t)}))()},touchStart:function(t){var e=this;this.Loop=setTimeout(function(){console.log("start.........",t),e.chat_delete_modal=t},500)},touchEnd:function(){clearTimeout(this.Loop)},delChat:function(t){var e=this;return i()(n.a.mark(function a(){var c;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c={chat_id:t.id},a.next=3,Object(o.g)(c);case 3:200===a.sent.code&&e.getChat();case 5:case"end":return a.stop()}},a,e)}))()},changeChat:function(t){this.$router.push("/chat/"+t)}},sockets:{connect:function(){console.log("socket connected")},response:function(t){console.log(t.chat_data);var e=t.chat_data,a=this.chat_list.filter(function(t){return t.id===e.id})[0],c=this.chat_list.indexOf(a);this.chat_list.splice(c,1),this.chat_list.unshift(e)}},filters:{}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wap-main-body",on:{click:function(e){t.chatroom_active=t.chat_delete_modal=!1}}},[a("div",{staticClass:"wap-main-body-message"},[t._l(t.chat_list,function(e){return[a("div",{staticClass:"chat-item",on:{click:function(a){t.changeChat(e.id)},touchstart:function(a){t.touchStart(e.id)},touchend:t.touchEnd}},[a("div",{staticClass:"chat-img"},[a("img",{attrs:{src:e.logo}})]),t._v(" "),a("div",{staticClass:"chat-text"},[a("div",{staticClass:"chat-text-top"},[a("span",{staticClass:"chat-text-name"},[t._v(t._s(e.name))]),t._v(" "),a("span",{staticClass:"chat-text-time"},[t._v(t._s(e.update_time))])]),t._v(" "),a("div",{staticClass:"chat-text-message",domProps:{innerHTML:t._s(e.message)}})]),t._v(" "),t.chat_delete_modal===e.id?a("div",{staticClass:"chat-item-modal"},[a("p",{on:{click:function(a){t.delChat(e)}}},[t._v("删除该聊天")])]):t._e()])]})],2)])},staticRenderFns:[]};var h=a("VU/8")(r,l,!1,function(t){a("H0lw")},null,null);e.default=h.exports},H0lw:function(t,e){}});
//# sourceMappingURL=17.eb5f749b7be3c4949357.js.map